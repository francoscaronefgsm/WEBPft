<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>All Constancies</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/main.css}" type="text/css">
    <style>
    .nav-pills {
        display: flex;
        justify-content: space-around;
        width: 98%;
        margin: 0 auto; /* Elimina márgenes que puedan restringir el ancho */
        padding: 10px; /* Elimina cualquier padding predeterminado */
    }
    .nav-pills .nav-link {
        background-color: white;
        color: black;
        border: 1px solid #dee2e6;
        flex: 1; /* Asegura que cada botón ocupe el mismo ancho */
        text-align: center;
    }
    .nav-pills .nav-link.active {
        background-color: #0d6efd; /* Color activo */
        color: white;
    }

</style>
</head>
<body>
<div th:insert="~{fragments/header :: header}"></div>

<div class="container-fluid mt-4">
    <ul class="nav nav-pills nav-fill" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link"
                    th:classappend="${activeTab == 'justifications'} ? 'active'"
                    id="pills-reporte1-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#pills-reporte1"
                    type="button" role="tab"
                    aria-controls="pills-reporte1"
                    aria-selected="true">
                Reporte de Justificaciones
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link"
                    th:classappend="${activeTab == 'constancies'} ? 'active'"
                    id="pills-reporte2-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#pills-reporte2"
                    type="button" role="tab"
                    aria-controls="pills-reporte2"
                    aria-selected="false">
                Reporte de Constancias
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link"
                    th:classappend="${activeTab == 'events'} ? 'active'"
                    id="pills-reporte3-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#pills-reporte3"
                    type="button" role="tab"
                    aria-controls="pills-reporte3"
                    aria-selected="false">
                Reporte de Eventos
            </button>
        </li>
    </ul>
    <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade"
             th:classappend="${activeTab == 'justifications'} ? 'show active'"
             id="pills-reporte1" role="tabpanel"
             aria-labelledby="pills-reporte1-tab">
            <fieldset>
                <legend> Filtros</legend>
                <form th:action="@{/admin/reports/justifications}" method="get">
                    <input type="hidden" name="activeTab" value="justifications" />
                    <div class="form-group mb-3">
                        <label for="student_r1">Students</label>
                        <select id="student_r1" name="student_r1" class="form-control">
                            <option th:each="student : ${students_r1}"
                                    th:value="${student.id}"
                                    th:text="${'Id: '+student.id+', '+student.getFirstName()+' '+student.getFirstSurname()}">
                                Student Name
                            </option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <button type="submit" class="btn btn-primary">Obtener Reporte</button>
                    </div>
                </form>
            </fieldset>
            <div>
                <h5>Lista de Justificaciones</h5>
                <div class="card-body table-container">
                    <table id="listJustifications" class="table table-hover mt-4">
                        <thead>
                        <tr>
                            <th>Event</th>
                            <th>Information</th>
                            <th>Date</th>
                            <th>Status</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="justification : ${justifications}">
                            <td th:text="${justification.event}"></td>
                            <td th:text="${justification.information}"></td>
                            <td  th:text="${#temporals.format(justification.date, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${justification.status}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade"
             th:classappend="${activeTab == 'constancies'} ? 'show active'"
             id="pills-reporte2" role="tabpanel"
             aria-labelledby="pills-reporte2-tab">
            <fieldset>
                <legend> Filtros</legend>
                <form th:action="@{/admin/reports/constancies}" method="get">
                    <input type="hidden" name="activeTab" value="constancies" />
                    <div class="form-group mb-3">
                        <label for="student_r2">Students</label>
                        <select id="student_r2" name="student_r2" class="form-control">
                            <option th:each="student : ${students_r2}"
                                    th:value="${student.id}"
                                    th:text="${'Id: '+student.id+', '+student.getFirstName()+' '+student.getFirstSurname()}">
                                Student Name
                            </option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <button type="submit" class="btn btn-primary">Obtener Reporte</button>
                    </div>
                </form>
            </fieldset>
            <div>
                <h5>Lista de Constancias</h5>
                <div class="card-body table-container">
                    <table id="listConstancyStudent" class="table table-hover mt-4">
                        <thead>
                        <tr>
                            <th>Constancy Type</th>
                            <th>Event Title</th>
                            <th>Information</th>
                            <th>Status</th>
                            <th>Date</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="constancy : ${constancies}">
                            <td th:text="${constancy.getConstancyType()}"></td>
                            <td th:text="${constancy.getEventTitle()}"></td>
                            <td th:text="${constancy.getInfo()}"></td>
                            <td th:text="${constancy.getStatus()}"></td>
                            <td th:text="${#temporals.format(constancy.getDate(), 'dd/MM/yyyy HH:mm')}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade"
             th:classappend="${activeTab == 'events'} ? 'show active'"
             id="pills-reporte3" role="tabpanel"
             aria-labelledby="pills-reporte3-tab">
            <fieldset>
                <legend> Filtros</legend>
                <form th:action="@{/admin/reports/events}" method="get">
                    <input type="hidden" name="activeTab" value="events" />
                    <div class="form-group mb-3">
                        <label for="student_r3">Students</label>
                        <select id="student_r3" name="student_r3" class="form-control">
                            <option th:each="student : ${students_r3}"
                                    th:value="${student.id}"
                                    th:text="${'Id: '+student.id+', '+student.getFirstName()+' '+student.getFirstSurname()}">Student Name</option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <button type="submit" class="btn btn-primary">Obtener Reporte</button>
                    </div>
                </form>
            </fieldset>
            <div>
                <h5>Lista de Eventos</h5>
                <div class="card-body table-container">
                    <table id="eventList" class="table table-hover mt-4">
                        <thead>
                        <tr>
                            <th>Title</th>
                            <th>Event Type</th>
                            <th>Teachers</th>
                            <th>Starting Date</th>
                            <th>Ending Date</th>
                            <th>Mode</th>
                            <th>Itr</th>
                            <th>Location</th>
                            <th>Status</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="event : ${events}">
                            <td th:text="${event.title}"></td>
                            <td th:text="${event.eventType}"></td>
                            <td th:text="${event.teacherNames}"></td>
                            <td th:text="${#temporals.format(event.startingDate, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${#temporals.format(event.endingDate, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${event.mode}"></td>
                            <td th:text="${event.getItrName()}"></td>
                            <td th:text="${event.location}"></td>
                            <td th:text="${event.status}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>
