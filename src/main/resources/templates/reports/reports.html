<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Todas las Constancias</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/main.css}" type="text/css">
    <style>
        .nav-pills {
            display: flex;
            justify-content: space-around;
            width: 98%;
            margin: 0 auto; /* Elimina márgenes que puedan restringir el ancho */
            padding: 10px; /* Elimina cualquier padding predeterminado */
        }
        .nav-pills .nav-link {
            background-color: white;
            color: black;
            border: 1px solid #dee2e6;
            flex: 1; /* Asegura que cada botón ocupe el mismo ancho */
            text-align: center;
        }
        .nav-pills .nav-link.active {
            background-color: #0d6efd; /* Color activo */
            color: white;
        }

    </style>
</head>
<body>
<div th:insert="~{fragments/header :: header}"></div>

<div class="container-fluid mt-4">
    <ul class="nav nav-pills nav-fill" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link"
                    th:classappend="${activeTab == 'justificaciones'} ? 'active'"
                    id="pills-reporte1-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#pills-reporte1"
                    type="button" role="tab"
                    aria-controls="pills-reporte1"
                    aria-selected="true">
                Reporte de Justificaciones
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link"
                    th:classappend="${activeTab == 'constancias'} ? 'active'"
                    id="pills-reporte2-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#pills-reporte2"
                    type="button" role="tab"
                    aria-controls="pills-reporte2"
                    aria-selected="false">
                Reporte de Constancias
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link"
                    th:classappend="${activeTab == 'eventos'} ? 'active'"
                    id="pills-reporte3-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#pills-reporte3"
                    type="button" role="tab"
                    aria-controls="pills-reporte3"
                    aria-selected="false">
                Reporte de Eventos
            </button>
        </li>
    </ul>
    <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade"
             th:classappend="${activeTab == 'justificaciones'} ? 'show active'"
             id="pills-reporte1" role="tabpanel"
             aria-labelledby="pills-reporte1-tab">
            <fieldset>
                <legend> Filtros</legend>
                <form th:action="@{/admin/reports/justifications}" method="get">
                    <input type="hidden" name="activeTab" value="justificaciones" />
                    <div class="form-group mb-3">
                        <label for="student_r1">Estudiantes</label>
                        <select id="student_r1" name="student_r1" class="form-control">
                            <option th:each="estudiante : ${students_r1}"
                                    th:value="${estudiante.id}"
                                    th:text="${'Id: '+estudiante.id+', '+estudiante.getPrimerNombre()+' '+estudiante.getPrimerApellido()}">
                                Nombre de Estudiante
                            </option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <button type="submit" class="btn btn-primary">Obtener Reporte</button>
                    </div>
                </form>
            </fieldset>
            <div>
                <h5>Lista de Justificaciones</h5>
                <div class="card-body table-container">
                    <table id="listJustificaciones" class="table table-hover mt-4">
                        <thead>
                        <tr>
                            <th>Evento</th>
                            <th>Información</th>
                            <th>Fecha</th>
                            <th>Estado</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="justificacion : ${justifications}">
                            <td th:text="${justificacion.evento}"></td>
                            <td th:text="${justificacion.informacion}"></td>
                            <td  th:text="${#temporals.format(justificacion.fecha, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${justificacion.estado}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade"
             th:classappend="${activeTab == 'constancias'} ? 'show active'"
             id="pills-reporte2" role="tabpanel"
             aria-labelledby="pills-reporte2-tab">
            <fieldset>
                <legend> Filtros</legend>
                <form th:action="@{/admin/reports/constancies}" method="get">
                    <input type="hidden" name="activeTab" value="constancias" />
                    <div class="form-group mb-3">
                        <label for="student_r2">Estudiantes</label>
                        <select id="student_r2" name="student_r2" class="form-control">
                            <option th:each="estudiante : ${students_r2}"
                                    th:value="${estudiante.id}"
                                    th:text="${'Id: '+estudiante.id+', '+estudiante.getPrimerNombre()+' '+estudiante.getPrimerApellido()}">
                                Nombre de Estudiante
                            </option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <button type="submit" class="btn btn-primary">Obtener Reporte</button>
                    </div>
                </form>
            </fieldset>
            <div>
                <h5>Lista de Constancias</h5>
                <div class="card-body table-container">
                    <table id="listConstanciaEstudiante" class="table table-hover mt-4">
                        <thead>
                        <tr>
                            <th>Tipo de Constancia</th>
                            <th>Título del Evento</th>
                            <th>Información</th>
                            <th>Estado</th>
                            <th>Fecha</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="constancia : ${constancies}">
                            <td th:text="${constancia.descripcionTipoConstancia}"></td>
                            <td th:text="${constancia.tituloEvento}"></td>
                            <td th:text="${constancia.informacion}"></td>
                            <td th:text="${constancia.descripcionEstadoConstancia}"></td>
                            <td th:text="${#temporals.format(constancia.fecha, 'dd/MM/yyyy HH:mm')}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade"
             th:classappend="${activeTab == 'eventos'} ? 'show active'"
             id="pills-reporte3" role="tabpanel"
             aria-labelledby="pills-reporte3-tab">
            <fieldset>
                <legend> Filtros</legend>
                <form th:action="@{/admin/reports/events}" method="get">
                    <input type="hidden" name="activeTab" value="eventos" />
                    <div class="form-group mb-3">
                        <label for="student_r3">Estudiantes</label>
                        <select id="student_r3" name="student_r3" class="form-control">
                            <option th:each="estudiante : ${students_r3}"
                                    th:value="${estudiante.id}"
                                    th:text="${'Id: '+estudiante.id+', '+estudiante.getPrimerNombre()+' '+estudiante.getPrimerApellido()}">Nombre de Estudiante</option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <button type="submit" class="btn btn-primary">Obtener Reporte</button>
                    </div>
                </form>
            </fieldset>
            <div>
                <h5>Lista de Eventos</h5>
                <div class="card-body table-container">
                    <table id="listaEventos" class="table table-hover mt-4">
                        <thead>
                        <tr>
                            <th>Título</th>
                            <th>Tipo de Evento</th>
                            <th>Profesores</th>
                            <th>Fecha de Inicio</th>
                            <th>Fecha de Fin</th>
                            <th>Modalidad</th>
                            <th>Itr</th>
                            <th>Ubicación</th>
                            <th>Estado</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="evento : ${events}">
                            <td th:text="${evento.titulo}"></td>
                            <td th:text="${evento.descripcionTipoEvento}"></td>
                            <td th:text="${evento.nombresDocentes}"></td>
                            <td th:text="${#temporals.format(evento.fechaInicio, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${#temporals.format(evento.fechaFin, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${evento.descripcionModalidad}"></td>
                            <td th:text="${evento.getNombreItr()}"></td>
                            <td th:text="${evento.ubicacion}"></td>
                            <td th:text="${evento.descripcionEstadoEvento}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>